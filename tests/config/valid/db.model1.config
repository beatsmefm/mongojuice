

module.exports = {
    find_one_by_id: {
        type: 'Item',
        params: {
            id: {
                required: true
            },
            field1: {},
            field2: {}
        },
        call: {
            findOne: {
                _id: ':id',
                field1: ':field1',
                field2: ':field2'
            }
        }
    },
    find_one_by_search: {
        type: 'Item',
        params: {
            id: {
                required: true
            },
            field1: {},
            field2: {}
        },
        call: {
            findOne: {
                _id: ':id',
                field1: ':field1',
                field2: ':field2'
            }
        }
    },
    find_one_by_fields_all_required: {
        type: 'Item',
        params: {
            id: {
                required: true
            },
            field1: {
                required: true
            },
            field2: {
                required: true
            }
        },
        call: {
            findOne: {
                _id: ':id',
                field1: ':field1',
                field2: ':field2'
            }
        }
    },
    find_many_by_id: {
        type: 'Item',
        params: {
            id: {
                required: true
            }
        },
        call: {
            find: {
                id: ':id'
            }
        }
    },
    find_may_by_ids: {
        type: 'Item',
        params: {
            ids: {
                required: true
            }
        },
        call: {
            find: {
                id: {
                    '$in': ids
                }
            }
        }
    },
    find_one_with_preset_field_search : {
        type: 'Item',
        call: {
            find: {
                name: 'Chris Fricke'
            }
        }
    },
    save_item: {
        type: 'Item',
        emit: {
            finish: 'save_item:sub_id'
        },
        params: {
            id: {},
            sub_id: {
                required: true
            }
        },
        call: {
            save: true
        }
    },
    update_item: {
        type: 'Item',
        emit: {
            finish: 'update_item:sub_id'
        },
        params: {
            id: { 
                required: true
            },
            sub_id: {
                required: true
            }
        },
        call: {
            update: [{
                $and: [{ _id: ':id' }, { sub_id: ':sub_id' }]
            }, {
                $set: { field1: 'field1' }
            }, { 
                'sort': 'descending'
            }]
        }
    }
}